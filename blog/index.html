<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>Why Compression Still Matters in a Broadband World</title><link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:first-child { margin-top: -20px; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 1cm; padding-right: 1cm; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root { --side-bar-bg-color: #fafafa; --control-text-color: #777; }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: normal; src: local("Open Sans Regular"), url("./github/400.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: normal; src: local("Open Sans Italic"), url("./github/400i.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: bold; src: local("Open Sans Bold"), url("./github/700.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: bold; src: local("Open Sans Bold Italic"), url("./github/700i.woff") format("woff"); }
html { font-size: 16px; }
body { font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 20px 30px 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
body > :first-child { margin-top: 0px !important; }
body > :last-child { margin-bottom: 0px !important; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(224, 236, 245); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 2px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border: 0px none; overflow: hidden; box-sizing: content-box; }
body > h2:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child + h2 { margin-top: 0px; padding-top: 0px; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child { margin-top: 0px; padding-top: 0px; }
a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 { margin-top: 0px; padding-top: 0px; }
h1 p, h2 p, h3 p, h4 p, h5 p, h6 p { margin-top: 0px; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
table tr { border-top: 1px solid rgb(223, 226, 229); margin: 0px; padding: 0px; }
table tr:nth-child(2n), thead { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(223, 226, 229); border-right-color: rgb(223, 226, 229); border-left-color: rgb(223, 226, 229); border-image: initial; border-bottom-style: initial; border-bottom-color: initial; text-align: left; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(223, 226, 229); text-align: left; margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-lines { padding-left: 4px; }
.code-tooltip { box-shadow: rgba(0, 28, 36, 0.3) 0px 1px 1px 0px; border-top: 1px solid rgb(238, 242, 242); }
.md-fences, code, tt { border: 1px solid rgb(231, 234, 237); background-color: rgb(248, 248, 248); border-radius: 3px; padding: 2px 4px 0px; font-size: 0.9em; }
code { background-color: rgb(243, 244, 244); padding: 0px 4px 2px; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding: 8px 1em 6px; }
.md-task-list-item > input { margin-left: -1.3em; }
@media screen and (min-width: 914px) {
}
@media print {
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { word-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
.md-mathjax-midline { background: rgb(250, 250, 250); }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border-radius: 3px; padding: 2px 0px 0px 4px; font-size: 0.9em; color: inherit; }
.md-tag { color: rgb(167, 167, 167); opacity: 1; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
.sidebar-tabs { border-bottom: none; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }
.file-node-content:hover .file-node-icon, .file-node-content:hover .file-node-open-state { visibility: visible; }
.mac-seamless-mode #typora-sidebar { background-color: var(--side-bar-bg-color); }
.md-lang { color: rgb(180, 101, 77); }
.html-for-mac .context-menu { --item-hover-bg-color: #E6F0FE; }
h1, h2, h3, h4, h5 { font-family: "Libre Baskerville", serif; }
h1 { color: rgb(75, 156, 211); }
a { color: rgb(0, 127, 174); }
h2 { color: rgb(75, 156, 211); }
h3 { color: rgb(112, 176, 220); }
h4, h5 { color: rgb(21, 21, 21); }
body { color: rgb(21, 21, 21); }
p { font-size: 18px; }





 .typora-export p, .typora-export .footnote-line {white-space: normal;} 
</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-node'><style>
.warning {
    color: #DB4545;
}
</style><p>NOTE: This blog post was originally published at the now defunct <a href='https://bovacademy.com/'>Bov Academy</a> Blog, a spin-off of Richard Bovell&#39;s <a href='https://javascriptissexy.com/'>JavaScript Is Sexy</a>.</p><p>It has been posted here for reference.</p><p>&nbsp;</p><h1><a name='header-n1481' class='md-header-anchor '></a>How to Compress and Optimize Images and Videos for Your Web Site and Do It Without Paying a Cent</h1><p>Compression, as it relates to the Web, is the act of taking a digital file and processing it in such a way that its intent remains the same, but its file size shrinks. Compressing your files will afford you more storage space, lower your bandwidth usage, and increase your site&#39;s page load speed.</p><p>There are a countless number of tools- both paid and free- that can assist you in compressing your page files. Many instructional sites provide small usage details for a particular tool. Few guides, if any, attempt to be comprehensive- cherry picking the best free tools while also providing easy to follow examples. Few guides, that is, until now. If you&#39;ve asked yourself &quot;How do I compress images&quot; or &quot;how do I compress video for the web?&quot; and you&#39;re looking for a one stop source- this is the place!</p><h2><a name='header-n6' class='md-header-anchor '></a>Why Compression Still Matters in a &quot;Broadband&quot; World</h2><p>Netflix, Spotify, and Steam: due to the great success of these bandwidth hungry services, not to mention the many similar services or competitors, one might be forgiven for thinking of bandwidth as an abundant resource.</p><p>The FCC defines &quot;broadband&quot; as connection speeds with a minimum of 25 megabits per second download, and 3 megabits per second upload. That&#39;s a relatively low standard. Consider that in Denmark, a country that does not make the top ten in average broadband speed, users average 42 megabits down and 18 megabits up <em>for Mobile usage</em>. Broadband leaders Singapore and Hong Kong have fixed connections that hover around 150 megabits for both downloads and uploads.</p><p>Yet, even by our rather low defined standard, the FCC estimates that in the US:</p><ul><li>34 Million Americans lack access to broadband</li><li>Another 2.6 million lack broadband access in US territories</li><li>Approximately 47 percent of students lack access to broadband in their schools</li></ul><p>The FCC&#39;s data covers <em>access</em>, or availability of high speed connections. They do not factor in the many millions more that do not posses a fast connection either due to economic factors, technological ignorance, or just plain ol&#39; disinterest.</p><p>Site optimization remains a valuable and necessary component of good site design. Even if your site is targeted towards broadband users only, optimization will help you not only expand your audience, but provide a faster, speedier experience for all users.</p><p>Even broadband focused sites rely on optimization.
Netflix estimates that the average size of a 1080p 2 hour video on their site is about 3 gigabytes. Without compression, the same video would average nearly a <em>tera</em>byte. Even those with the fastest connections would struggle to stream such a file!</p><p>The topic of optimization is so complex that a whole new Bov Academy program could  be written around it. I will be focusing on compression methods commonly used for web images and videos.</p><p>I will also cover the differences between common web image types, cross browser video support, compression types and open source software tools, as well as general recommended work flows and use case scenarios.</p><hr /><p><strong>Note:</strong></p><p>Example files, including ones referenced in this post, can be found <a href='https://nathanjplummer.github.io/blog/Intro_Compression_Files.zip'>at this location</a>.</p><hr /><h2><a name='header-n26' class='md-header-anchor '></a>Compression Methods: Lossless vs Lossy</h2><p>All compression methods fall into one of two categories. <em>Lossless</em> or <em>Lossy.</em></p><h3><a name='header-n28' class='md-header-anchor '></a>Lossless Compression</h3><p><em>Lossless Compression: shrinking a file with absolutely NO quality loss in the process.</em></p><p>Lossless compression methods only change the storage and structure of your data- by their design. <strong>They do not modify the content</strong>.</p><p>Simply put, lossless compressors use clever algorithms that shrink the file size while the <em>output remains identical to the uncompressed original.</em></p><p>There should be no change in quality between an uncompressed file and its lossless compressed equivalent. In fact, a lossless compressor is usually not considered successful unless you can convert the file back to the original format and have it be <em>bit identical</em> to the original.</p><p>This philosophy is both the advantage and the limitation of lossless compressors. The amount of file size shrinkage is usually far inferior to their lossy counterparts.</p><p>Still, impressive results can be achieved. The audio compressor FLAC is capable of shrinking uncompressed wav files to anywhere between 50% and 70% of their original size.</p><h3><a name='header-n35' class='md-header-anchor '></a>Lossy Compression</h3><p><em>Lossy Compression: Additional file shrinking at the cost of fidelity.</em></p><p>In contrast to their lossless counterparts, lossy compressors modify the structure of the original data. While this is oversimplifying things by quite a margin, most work by using complex formulas that try to guess what data can be removed without being &quot;noticed&quot; by the user. Many have adjustable parameters. The higher the amount of compression, the more zealous the encoder will be in removing data. Conversely, the lower the compression the more likely the encoder will err on side of quality when compressing digital content.</p><h3><a name='header-n38' class='md-header-anchor '></a>Workflows when using Lossless and Lossy Compression</h3><p>Lossless compression is often referred to as <em>archival</em>. If you can assume a lossless compressor works correctly you can then also feel comfortable deleting the original file. You can always return the new file to the original state via decompression.</p><p>In contrast, when working with lossy formats, <em>always keep a backup of your original file.</em> If you decide to make further adjustments down the road, you&#39;ll want to work from your original uncompressed or lossless compressed version. Running lossy compression schemes on the same file more than once, though potentially possible and at times necessary, should be avoided whenever possible. Repeated lossy compression increases the chances of introducing digital artifacts—visual or auditory errors—into your data.</p><p>There may be cases when you have to modify an already compressed asset and don&#39;t have access to the original. In such events, treat the <em>least compressed</em> version of your asset as your <strong>source</strong> and keep a backup of it. If you have to make adjustments further down the road, always do so from your source file, never a modified version.</p><h3><a name='header-n42' class='md-header-anchor '></a>Comparing Lossy and Lossless Compression in Images</h3><p>Below is an image of me posing with <em>A Nightmare on Elm Street</em> actress Brooke Bundy. I have compressed the image using a variety of techniques.</p><p><img src='https://nathanjplummer.github.io/blog/WordPress/Compression/compare.png' alt='Comparision' referrerPolicy='no-referrer' /></p><p>Compared to the reference image in the top left, JPEG at Quality 95 looks nearly identical! While there are no doubt differences, I struggled to find any obvious ones. Despite this, the file is still only about 4% of the size of the original! Impressive results, indeed.</p><p>Moving down a step to the quality 84 image, the differences still remain subtle. If you zoom in on my stubbly beard you may notice it starts to lose some of its definition in the third photo. Still, the effect is minimal, and at 53 kB the file is now less than 2% the size of our original PNG.</p><p>As we make our way to the lowest quality JPEG the differences become obvious. Compression artifacts are everywhere! While the file size has shrunk to an amazingly low 0.4% faces are muddy, and the star pattern on the wall has been converted into blocky splotches. While the results are no less technically impressive, the image is no longer usable for a professional (or even non-professional) environment.</p><p>Some things to note:</p><ul><li>When creating or saving images most programs will be conservative with PNG compression and will use the highest level that will allow immediate access to your image. PNG optimization is fairly resource intensive and can take several minutes on even powerful machines. Due to this intensive nature, such techniques are left to dedicated tools. Results vary wildly based on image content. In the case of our example image above, we can losslessly optimize it down to 765 kB. I will cover how to use these tools.</li><li>The example above is meant to give you a rough idea of JPEG results at different settings, but it is far from a scientific example. The higher quality images were compressed using Google&#39;s <a href='https://github.com/google/guetzli'>Guetzli</a>. Since Guetzli does not support quality settings under 84, the last image was created using <a href='https://github.com/imagemin/imagemin-jpeg-recompress'>jpeg-recompress</a>. I will cover both these tools, along with a third tool, <a href='https://github.com/tjko/jpegoptim'>jpegoptim</a>.</li></ul><p>If you&#39;d like to get a closer look at these images, download the zip folder linked at the top of this post. Look inside the &quot;Comparison&quot; folder.</p><p>Below is visual representation, including both the optimized and default PNG values, of file size utilizing the different compression methods discussed thus far.</p><p><img src='https://nathanjplummer.github.io/blog/WordPress/Compression/Graph.jpg' alt='Graph' referrerPolicy='no-referrer' /></p><h2><a name='header-n57' class='md-header-anchor '></a>Introduction to Image Compression and File Types</h2><h3><a name='header-n58' class='md-header-anchor '></a>Universal Image File Types</h3><p>These file types are supported by all major browsers.</p><h4><a name='header-n60' class='md-header-anchor '></a>JPEG - Joint Photographic Experts Group</h4><p>Likely the most common image type you&#39;ll find on the web, JPEG uses a variety of lossy algorithms to greatly reduce the size of an image. The file extensions .jpg and .jpeg are both commonly used and are interchangeable.  JPEG images do not have an alpha channel and therefor there is no support for transparency.  </p><h4><a name='header-n62' class='md-header-anchor '></a>GIF - Graphics Interchange Format</h4><p>Though originally a lossless file format, GIF images are limited to 256 colors. In that sense, GIF is somewhat unique as it&#39;s commonly used as both a lossy and a lossless file container. If your image is 256 colors or less, GIF will be lossless. If your image is more than 256 colors, GIF conversion will be inherently lossy.</p><p>GIF has been mostly superseded by PNG. Despite this, it has a few unique characteristics that afford it a continued, if dwindling, web presence.</p><p>For low-color bit images the results can sometimes be smaller in file size (and equal in quality) compared to lossless PNG counterparts. GIF also has the unique ability to simulate animation- a trick unmatched by other common image formats and that was difficult to replicate by other means before the release of HTML5 Video.</p><h4><a name='header-n66' class='md-header-anchor '></a>PNG - Portable Network Graphics</h4><p>Most typically used as a lossless container, PNG was developed in 1996 as a replacement for GIF due to GIF&#39;s increasingly deficient color limitations as well as its reliance on patented software algorithms (the patent in question expired in 2003). Developed specifically for online usage, PNG is the most common lossless image type on the web. It is generally used when image quality is of the highest importance.</p><p>Though less common, lossy PNG compression algorithms are available. This approach is uncommon as the JPEG standard, due to its higher compression ratio, is usually preferred. However, unlike JPEG, lossy PNGS can support transparencies. We will discuss transparencies in a further section of this post.</p><h4><a name='header-n69' class='md-header-anchor '></a>TIFF - Tagged Image File Format</h4><p>Designed for extendibility, TIFF can be lossy using certain graphics plugins, but is most commonly employed for lossless compressed images.</p><p>More malleable than PNG by design, the relatively increased file size compared to other image formats- even lossless ones- makes tiff impractical for everyday web development.</p><p>Still, its more common configurations enjoy near universal browser support. TIFF&#39;s ability to negatively store color spaces beyond the web approved RGB sees its use in sites that provide image assets for use in tools outside the web browser, such as Adobe Photoshop.</p><h4><a name='header-n73' class='md-header-anchor '></a>BMP - Bitmap Image Format</h4><p>A Microsoft format which typically contains no compression. Browser support is high, but BMP is rarely used on the web due to the extreme file sizes it produces.</p><h3><a name='header-n75' class='md-header-anchor '></a>Unsupported/Proposed File Types</h3><p>The following is a short list of some of the better known formats that have been proposed as potential web standards, but have yet to develop the browser support needed to do so.</p><h4><a name='header-n77' class='md-header-anchor '></a>JPEG 2000 - Joint Photographic Experts Group 2000</h4><p>Developed by the same group behind the original JPEG, the 2000 version provides a superior compression ratio, multiple resolutions in a single file, and both lossless and lossy compression modes. Unfortunately, browser support is limited to Safari.</p><h4><a name='header-n79' class='md-header-anchor '></a>JPEG XR - JPEG Extended Range</h4><p>A Microsoft developed alternative to JPEG 2000 with a similar feature set, minus the multiple resolutions. Supported in Internet Explorer 11 and all versions of Microsoft Edge.</p><h4><a name='header-n81' class='md-header-anchor '></a>BPG - Better Portal Graphics</h4><p>An open source encoder based on a modified version of the video codec h.265. Compression rates are more than double that of the original JPEG at similar quality levels. Not naively supported in any major browsers, the developer of BPG has created a 56 kB JavaScript decoder which can add support through a script. The decoder converts the image to PNG post image download and does not require the user to download any additional files. Support for animations and higher color depths is also present.</p><h2><a name='header-n83' class='md-header-anchor '></a>How To Compress Your Web Images in Windows, OSX, and Linux Without Quality Loss</h2><p>In comparison to lossy encoding, lossless optimization is actually quite simple to achieve- thanks to the help of some clever software developers.</p><p>In this section, I will teach you how to use free tools to compress images that are smaller in size, yet remain bit identical to your original source.</p><p>Since the output should always be equal in content to the input, lossless encoders can easily be stacked on top of each other. In other words, you can run a lossless image through a compressor, shave off some of the file size, and then feel free to run it through <em>another</em> lossless compressor to see if you can get a better result.</p><p>Wouldn&#39;t it be great if someone developed a tool to run through all the various options and guarantee you were getting the lowest file size possible?</p><p>Not only do such software options exist, but they use open source tools, are provided at zero cost, and there is at least one available on all 3 major OS platforms!</p><h3><a name='header-n89' class='md-header-anchor '></a>On Windows</h3><p>If you&#39;re on Windows, lossless compression is going to be a breeze.</p><p>Download <a href='http://nikkhokkho.sourceforge.net/static.php?page=FileOptimizer'>FileOptimizer</a>.</p><p class="warning"> New versions of FileOptimizer will ask if you want to enable ads to support the author.  While I would normally encourage enabling this option, the ad server File Optimizer currently uses triggers constant warnings from my spyware scanners.  Until this is fixed, disable ads.  If you enable them by accident you can shut them off in the second general options tab.</p><p>A GUI based Application, by default FileOptimizer compresses any file you throw at it using only lossless algorithms and using every popular open source compression algorithm available. The author updates the program every few weeks with the latest versions of the backend tools.</p><p>While FileOptimizer provides a wealth of options, it&#39;s mostly a drag and drop affair. Drag a file from your file explorer into FileOptimizer, click &quot;Optimize&quot; from the file menu, and then choose &quot;Optimize all Files.&quot;</p><p>You can also drop a folder for batch conversion.</p><p>FileOptimizer has, to put it mildly, <em>extensive</em> file type support. From the homepage:</p><blockquote>FileOptimizer is an advanced file optimizer featuring a lossless (no quality loss) file size reduction that supports: .3GP, .A, .AAI, .AC, .ACC, .ADP, .AI, .AIR, .APK, .APNG, .APPX, .APR,
.ART, .AVS, .BAR, .BMP, .BPL, .BSZ, .CBT, .CBZ, .CDR, .CDT, .CHI, .CHM, .CHQ,
.CHS, .CHW, .CPL, .CSL, .CSS, .DB, .DCX, .DEB, .DES, .DIB, .DLL, .DOC, .DOCM,
.DOCX, .DOT, .DOTM, .DOTX, .DRV, .DWF, .DWFX, .EASM, .EML, .EMLX, .EPDF,
.EPRT, .EPUB, .EXE, .FAX, .FB2, .FDF, .FITS, .FLA, .FLAC, .FPX, .FXG, .GALLERY,
.GALLERYCOLLECTION, .GALLERYITEM, .GIF, .GRS, .GZ, .HDR, .HRZ, .HTM,
.HTML, .ICO, .INK, .IPA, .IPK, .IPSW, .ITA, .ITS, .ITZ, .JAR, .JFI, .JFIF, .JIF, .JNG,
.JP2, .JPC, .JPE, .JPEG, .JPG, .JPS, .JS, .JSON, .KML, .KMZ, .KSF, .LIB, .LIT, .LUA,
.LUAC, .LXF, .LZL, .M4A, .M4B, .M4P, .M4R, .M4V, .MAX, .MBX, .MCE, .MDB,
.MDT, .MDZ, .MHT, .MHTML, .MIC, .MIF, .MIFF, .MIX, .MIZ, .MKA, .MKS, .MKV,
.MMIP, .MNG, .MP3, .MP4, .MPD, .MPO, .MPP, .MPT, .MSC, .MSG, .MSI, .MSP,
.MST, .MSZ, .MTV, .MTW, .MVZ, .NAR, .NBK, .NOTEBOOK, .O, .OBJ, .OCX,
.ODB, .ODF, .ODG, .ODP, .ODS, .ODT, .OEX, .OGA, .OGG, .OGV, .OGX, .OLE,
.OLE2, .ONE, .OPT, .OSK, .OST, .OTB, .OXPS, .P7, .PALM, .PBM, .PCC, .PCD,
.PCDS, .PCX, .PDB, .PDF, .PFM, .PGM, .PIC, .PICON, .PICT, .PK3, .PNG, .PNM,
.PNS, .POTM, .POTX, .PPAM, .PPM, .PPS, .PPSM, .PPSX, .PPT, .PPTM, .PPTX,
.PSB, .PSD, .PTIF, .PTIFF, .PUB, .PUZ, .R2SKIN, .RDB, .RFA, .RFT, .RMSKIN,
.RTE, .RVT, .S3Z, .SCR, .SGML, .SLDASM, .SLDDRW, .SLDM, .SLDPRT, .SLDX,
.SOU, .SPL, .SPO, .STZ, .SUN, .SVG, .SVGZ, .SWC, .SWF, .SYS, .TAR, .TGZ,
.THM, .TIF, .TIFF, .VBX, .VCARD, .VCF, .VDX, .VICAR, .VIFF, .VLT, .VSD, .VSS,
.VST, .VSX, .VTX, .WAL, .WBA, .WBMP, .WEBP, .WIZ, .WMZ, .WPS, .WSZ,
.XAP, .XBM, .XHTML, .XL, .XLA, .XLAM, .XLC, .XLM, .XLS, .XLSM, .XLSX, .XLTM,
.XLTX, .XLW, .XML, .XMZ, .XNK, .XPI, .XPM, .XPS, .XSF, .XSL, .XSLT, .XSN,
.XWD, .ZIP, STICKYNOTES.SNT, and THUMBS.DB file formats among others.</blockquote><p>You may have noticed JPEG is on that list. File Optimizer can even apply additional lossless optimizations to lossy compressed file formats!</p><p>FileOptimizer lets you change the program&#39;s speed to output compression rate ratio. To do this, select &quot;Optimize&quot; in the file menu and choose &quot;options&quot; in the submenu. At the top, you should see a selection for &quot;Optimization level.&quot;</p><p><img src='https://nathanjplummer.github.io/blog/WordPress/Compression/fo_options.gif' alt='File Optimizer Level' referrerPolicy='no-referrer' /></p><p>I suggest changing this from the default &quot;5&quot; to &quot;9&quot; for better results. While this will increase the time it takes the program to complete its task, File Optimizer requires no further user intervention and can be run in the background.</p><p>Be aware File Optimizer will replace your original file with the newly compressed version. Your original files will be placed in the recycle bin should you have any issues and need to recover them.</p><p class="warning"> Recent versions of FileOptimizer are now considerably slower when increasing the compression level. This is because FileOptimizer is frequently adding new tools to the tool chain. I still recommend this change, but user beware if time is of the essence.</p><h3><a name='header-n104' class='md-header-anchor '></a>On OS X</h3><p>A similar tool using much of the same backend code is <a href='https://imageoptim.com/mac'>available for OS X</a>.</p><p><img src='https://nathanjplummer.github.io/blog/WordPress/Compression/ImageOptim.png' alt='ImageOptim' referrerPolicy='no-referrer' /></p><h3><a name='header-n107' class='md-header-anchor '></a>On Linux</h3><p>Things are a bit more complicated on Linux.</p><p>Though a native app technically exists in the form of <a href='https://trimage.org/'>Trimage</a>, the codebase <a href='https://github.com/Kilian/Trimage'>has not been updated</a> since 2013 and the app is all but abandoned.</p><p>During testing, the results were nowhere near as impressive as those of FileOptimizer.</p><p>On Ubuntu, I was able to install FileOptimizer via Windows Compatibility layer WINE.</p><p class="warning">This post originally provided instructions for installing wine-staging.  This is no longer needed as of WINE 3.0 and the instructions have been updated accordingly.  Additionally, please see the important note in the above Windows section regarding ads in FileOptimizer.</p><h3><a name='header-n113' class='md-header-anchor '></a>Installing File Optimizer in WINE</h3><h4><a name='header-n114' class='md-header-anchor '></a>Install Wine</h4><p>If you&#39;re using Ubuntu 18.04 you can install a FileOptimizer compatible version of wine directly from the Ubuntu repository:</p><p><code>sudo apt-get install wine</code></p><p>Older versions of Ubuntu will require you <a href='http://ubuntuhandbook.org/index.php/2018/01/wine-3-0-released-with-direct3d-10-and-11-support/'>enabling the official WINE repository</a> to install the current version of WINE, which FileOptimizer requires.</p><h4><a name='header-n118' class='md-header-anchor '></a>&quot;Install&quot; FileOptimizer</h4><p>Head to the <a href='https://sourceforge.net/projects/nikkhokkho/files/FileOptimizer/'>FileOptimizer Download Page</a>.</p><p>Ignore the &quot;Looking for the newest version?&quot; link at the top of the page and click on the newest <em>numbered</em> version. You should be looking at a page similar to <a href='https://sourceforge.net/projects/nikkhokkho/files/FileOptimizer/9.80.1769/'>this one</a>.</p><p><img src='https://nathanjplummer.github.io/blog/WordPress/Compression/fo_download.gif' alt='FileOptimizer Download' referrerPolicy='no-referrer' /></p><p>Key here is to download the &quot;FileOptimizerFull.zip&quot; file, NOT the .exe file.</p><p class="warning">File Optimizer has recently changed distribution file formats. Instead of zip files, it now uses the 7z.exe format. This file will still unzip normally but will require you have the 7zip library installed in Ubuntu.</p><p><code>sudo apt-get install p7zip-full</code></p><p>Extract the files to a location of your choice. I personally like to create a folder &quot;WineProgs&quot; inside my home folder, and then I create another folder for each portable Windows app, such as &quot;FileOptimizer&quot;.</p><p>Once you&#39;ve unzipped everything, type <code>wine location/to/fileoptimizer_exe</code> in your command line. For example, using my above mentioned folder structure, I type the command <code>wine ~/WineProgs/FileOptimizer/FileOptimizer64.exe</code>.</p><h2><a name='header-n127' class='md-header-anchor '></a>How To Compress Your Web Images and Get The Smallest Filesize Possible</h2><p>Compared to its lossless counterpart, lossy compression is a bit trickier. There are several compression libraries- each with their own strengths and weakness. Due to its near universal browser support—for browsers both new and old—jpeg is the gold standard for compressed images on the web.</p><p>Here I&#39;ll introduce you to some of the best and most popular free jpeg compressors, provide instructions you can use to compress your own images, and discuss which tools are best suited to a particular task.</p><p>I will also address the one use case in which you should never use jpeg, and the alternative tool to use instead.</p><h3><a name='header-n131' class='md-header-anchor '></a><a href='https://github.com/tjko/jpegoptim'>jpegoptim</a></h3><p>jpegoptim has been around since 1996 and can be found on just about any OS. Most of its functions have been significantly improved by more contemporary alternatives, but it has one useful trick up its sleeve that makes it worth keeping around: it&#39;s phenomenal at compressing a jpeg image to a specified size.</p><h4><a name='header-n133' class='md-header-anchor '></a>Installation</h4><p>Ubuntu includes it in their repository, so installation in Ubuntu is as simple as:</p><p><code>sudo apt-get install jpegoptim</code></p><p>Usage in OS X requires installing the <a href='brew%20install%20jpegoptim'>brew package manager</a>. Once you have brew it&#39;s a simple as:</p><p><code>brew install jpegoptim</code></p><p>Windows has no official binaries, however, due to the open source nature of jpegoptim <a href='https://www.kapadiya.net/jpegoptim-win32/binaries.html'>unofficial binaries designed to work in cmd are available</a>.</p><p>Windows 10 users may want to consider <a href='https://www.howtogeek.com/249966/how-to-install-and-use-the-linux-bash-shell-on-windows-10/'>Installing the Ubuntu Bash Shell in Windows</a> and using the Linux version.</p><h4><a name='header-n140' class='md-header-anchor '></a>Basic Usage</h4><p>The basic usage of jpegoptim:
<code>jpegoptim imagelocation.jpg</code></p><p>By default, jpegoptim runs a few lossless optimizations on your image file. Generally the results will not be as good as what you can achieve using <a href='http://nikkhokkho.sourceforge.net/static.php?page=FileOptimizer'>FileOptimizer</a> or <a href='https://imageoptim.com/mac'>ImageOptim</a>. However, jpegoptim will provide its results much faster than the GUI based programs.</p><p><strong><em>Be aware jpegoptim will overwrite the original input file without warning.</em></strong></p><h4><a name='header-n144' class='md-header-anchor '></a>Compress to a specific file size</h4><p>If you&#39;re curious about some of the additional features of jpegoptim you <a href='http://manpages.ubuntu.com/manpages/xenial/man1/jpegoptim.1.html'>can take a look at the program&#39;s manpage</a>. For most operations, however, alternative programs will provide better results than jpegoptim.</p><p>Where it really shines- and in fact, the only reason I&#39;m covering it at all- is jpegoptim&#39;s ability to let you assign an image size and have it spit out a jpeg near your target.</p><p>To do so, simply add a <code>--size=</code> flag followed by your target file size in kilobytes, and the letter &#39;k&#39;.</p><p>For example:</p><p><code>fileoptim --size=100k imagelocation.jpg</code></p><p>I&#39;ve obtained some pretty impressive results using this method, but be aware: in extreme circumstances the program will either not reach the target you provided, or will provide a result with obvious image abnormalities. There&#39;s no magic involved and you can only push the compressor so far.</p><p>Here&#39;s the resulting 6 kilobyte file when I try to compress our previous test image to 2 kilobytes.</p><p><img src='https://nathanjplummer.github.io/blog/WordPress/Compression/Commodore_Nightmare.jpg' alt='Commodore Nightmare' referrerPolicy='no-referrer' /></p><p>With this in mind, remember, <strong>by default this command will overwrite your original file.</strong></p><p>You can see more impressive results by opening the jpegoptim folder in the zip file provided at the top of this post. In this case, I&#39;ve shrunk a 14.5mb image to 1.5mb with only a minor visible loss in quality.</p><p>Using the <code>--dest</code> flag we can keep our original file- a practice I highly recommend.</p><p><code>jpegoptim --size=125k imagelocation.jpg --dest ~/Desktop/</code></p><p class="warning">Jpegoptim's destination flag does <strong>not</strong> allow you to specify a new filename, only a new destination. Because of this you can not add a new file to the same folder as your original. Due to this limitation, I usually avoid using the <code>--dest</code> flag altogether and simply make an image copy to to run through jpegoptim. Use which ever method works best for you.</p><h4><a name='header-n158' class='md-header-anchor '></a>In Brief</h4><ul><li>Use the command <code>jpegoptim</code> with any JPEG file for a fast lossless optimization</li><li>The <code>size=</code> flag is jpegoptim&#39;s best feature</li><li>The <code>--dest</code> flag can be useful despite some limitations</li></ul><h3><a name='header-n166' class='md-header-anchor '></a><a href='https://github.com/danielgtaylor/jpeg-archive'>jpeg-recompress</a></h3><p>Before Google released its Guetzli tool (only six months ago) jpeg-recompress was practically the undisputed king when it came to lossy JPEG compression tools.</p><p>Lots of compression tools will let you set a quality metric. Some tools do this using keywords, such as &#39;very high&#39;, &#39;high&#39;, &#39;medium&#39;, etc. Other tools will allow you to set a percent, such as &#39;quality=80&#39;.</p><p>The use case is actually pretty simple: the higher the quality, the less compression applied to the image. This allows the user to decide for him or herself where to draw the line between image quality and image size.</p><p>Sounds simple enough, but keep in mind—at any quality designation—the goal of a JPEG compressor is to try to remove only the least visible parts of an image.</p><p>So while a JPEG compressed at 80 percent may indeed be &quot;bit for bit&quot; a higher quality image than a JPEG compressed at 70 percent, if the data removed is not visible to the eye, then the <em>perceived quality</em> is equal.</p><p>Let&#39;s take another look at our compression rate comparison image:</p><p><img src='https://nathanjplummer.github.io/blog/WordPress/Compression/compare.png' alt='Compare' referrerPolicy='no-referrer' /></p><p>Is there a perceivable difference between the Quality 95 and the Quality 84?</p><p>Perhaps to an eagle eyed reader there is, but for the sake of brevity and clarity, let&#39;s assume the images are <em>visually</em> indistinguishable.</p><p>In such a scenario, the Quality 84 JPEG is the superior file. Equal visual quality at less than half the file size!</p><p>Would they still be identical if we turned the quality level down to 83? What about 78?</p><p>Ideally, we&#39;d want to find the sweet spot where the visual quality remains equal (or at least, indistinguishable), but the file size shrinks as much as possible.</p><p>One way we could accomplish this would be by testing different quality levels until we get the result to our liking. Such a method, while likely fortuitous, would be rather time consuming.</p><p>As it turns out, several open source libraries exist that attempt to digitally quantify an image&#39;s perceived quality.</p><p>Using said libraries, jpeg-recompress allows users to select a quality range and automatically search for the &quot;sweet spot&quot;, taking a great deal of the guesswork out of the process.</p><h4><a name='header-n182' class='md-header-anchor '></a>Installation</h4><p>Jpeg-recompress is part of an umbrella project titled jpeg-archive. Prebuilt binaries for every major OS can be found <a href='https://github.com/danielgtaylor/jpeg-archive/releases'>at this location</a>.</p><p>To install in Ubuntu, download the Linux version, extract the jpeg-recompress binary from the tar archive, and then move the file to the /usr/bin folder. You can do this by running the following commands, one line at a time, from the terminal.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">cd ~/Downloads</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">wget 'https://github.com/danielgtaylor/jpeg-archive/releases/download/2.1.1/jpeg-archive-2.1.1-linux.tar.bz2'</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mkdir ./jpgr</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tar -xf jpeg-archive-2.1.1-linux.tar.bz2 -C ./jpgr</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">sudo mv ./jpeg-recompress /usr/bin</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><p>In OS X the easiest route is once again to use homebrew- though beware the version provided is considerably older than the current release.</p><p><code>brew install jpeg-archive</code></p><p>In Windows, download the linked binary. From CMD simply point to the jpeg-recompress file when you want to run a command. For example:</p><p><code>&quot;C:/Program Files/jpegopt/jpeg-recompress.exe&quot; filename.jpg</code></p><p>Once again, Windows 10 users may have better results using the Linux version in <a href='https://www.howtogeek.com/249966/how-to-install-and-use-the-linux-bash-shell-on-windows-10/'>Ubuntu for Windows</a>.</p><p>If using the Linux subsystem, place the Linux binary in:</p><p><code>C:/Users/Username/AppData/Local/Lxss/rootfs/usr/bin</code></p><p><img src='https://nathanjplummer.github.io/blog/WordPress/Compression/LinSub.jpg' alt='Linux Subsystem' referrerPolicy='no-referrer' /></p><h4><a name='header-n194' class='md-header-anchor '></a>Usage</h4><p>The default settings for jpeg-recompress are actually pretty stellar.</p><p><code>jpeg-recompress image.jpg compressed.jpg</code></p><p>If you just want to quickly optimize an image and not fuss over particulars, that&#39;s the command for you! In the zip file that goes along with this post you can see the results for yourself- a 15MB file was compressed to 4MB in less than a minute. Impressive!</p><h4><a name='header-n198' class='md-header-anchor '></a>Additional Commands</h4><ul><li><code>--min</code> and <code>--max</code></li></ul><p>Remember, jpeg-recompress works by compressing an image several times at different quality settings and then finding the lowest possible value with minimal quality loss. These settings allow you to change the minimum and maximum quality values of the jpeg. For reference, the default values are <code>-- min 40</code> and <code>--max 95</code>.</p><p>In most cases these flags will come into play if your results need fine tuning after running the default command. At the end of its run, the program will alert you to its selected quality setting. For example, when running the default parameters on our test image we get the following message:</p><p><code>Final optimized ssim at q=67: 0.999870</code></p><p>Running this command will change the minimal value:</p><p><code>jpeg-recompress --min 30 image.jpg compressed.jpg</code></p><p>Resulting in the exact same file as the default option. Since the program chose a value of <code>q=67</code> as optimal, changing the minimum level does not have an effect on our result.</p><p>If your resulting file is too large and you need to further shrink things down, you do this by <em>decreasing the maximum below the selected quality at default settings.</em></p><p><code>jpeg-recompress --max 62 image.jpg compressed.jpg</code></p><p>Will result in a file 3.5MB, or 500k less than our default settings.</p><h4><a name='header-n211' class='md-header-anchor '></a>Any More Options?</h4><p>Advanced and knowledgeable image compressors are likely shaking their fists at me right now. There are a LOT more features in jpeg-recompress, some of which are covered on the <a href='https://github.com/danielgtaylor/jpeg-archive'>jpeg-archive GitHub page</a>.</p><p>&quot;You didn&#39;t mention the <code>--accurate</code> option!&quot;</p><p>&quot;What about using SmallFry instead of SSIM?&quot;</p><p>&quot;You can <code>--strip</code> out the metadata to save extra space...&quot;</p><p>Jpeg-recompress has so many options and tweaks available that I could probably write a 5000 word blog post on this utility alone.</p><p>The methods covered here will cover 95% of use cases, with the rest of the options necessary only when you absolutely need to fine tune your results.</p><p>As this post is meant to be a simple-to-follow <em>introduction</em> to compression utilities I have chosen to highlight only the most commonly used options.</p><h4><a name='header-n219' class='md-header-anchor '></a>In Brief</h4><ul><li>jpeg-recompress tries to find the &quot;Sweet Spot&quot; between image quality and compression</li><li>jepg-recompress allows you to specify a <code>-min</code> and <code>-max</code> quality value</li><li>jpeg-recompress has many advanced options available</li></ul><h3><a name='header-n227' class='md-header-anchor '></a><a href='https://github.com/google/guetzli'>Guetzli</a></h3><p>The new kid on the block, Guetzli is a fully backwards compatible jpeg encoder developed by Google but released as an open source tool. Google claims that not only does Guetzli provide better compression than the competition, but that its results improve on perceptual quality when compared to alternatives such as jpeg-recompress.</p><p>Google is upfront that jpeg creation using Guetzli is a considerably slow process. One should estimate approximately 1 minute of encoding time per each megabyte of the input image.</p><h4><a name='header-n230' class='md-header-anchor '></a>Installation</h4><p>Installation of Guetzli is almost identical to that of jpeg-recompress. As such, I will be using the same set of instructions, making adjustments only where necessary.</p><p>Guetzli binaries are available at <a href='https://github.com/google/guetzli/releases'>this location</a>.</p><p>To install Guetzli in Ubuntu, download the Linux version, and then move the file to the <code>/usr/bin</code> folder. You can do this by running the following commands, one line at a time, from the terminal.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">cd ~/Downloads</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">wget 'https://github.com/google/guetzli/releases/download/v1.0.1/guetzli_linux_x86-64'</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">sudo mv ./guetzli_linux_x86-64 /usr/bin</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><p>In OS X, Guetzli, like all the other jpeg utilities, can be installed using homebrew:</p><p><code>brew install guetzli</code></p><p>In Windows, download the linked binary. From CMD simply point to the Guetzli file when you want to run a command. For example:</p><p><code>&quot;C:/Program Files/Guetzli/guetzli_windows_x86-64.exe&quot; image.jpg output.jpg</code></p><p>Windows 10 user may have better results using the Linux version in <a href='https://www.howtogeek.com/249966/how-to-install-and-use-the-linux-bash-shell-on-windows-10/'>Ubuntu for Windows</a>.</p><p>If using the Linux subsystem, place the Linux binary in:</p><p><code>C:/Users/Username/AppData/Local/Lxss/rootfs/usrbin</code></p><p><img src='https://nathanjplummer.github.io/blog/WordPress/Compression/LinSub.jpg' alt='Linux Subsystem' referrerPolicy='no-referrer' /></p><h4><a name='header-n243' class='md-header-anchor '></a>Usage</h4><p>In contrast to <code>jpeg-recompress</code> and it&#39;s endlessly tweakable options, Guetzli provides a slim and straightforward interface with few adjustable parameters.</p><p>The basic usage of Guetzli can be boiled down to:</p><p><code>guetzli image.jpg compressed.jpg</code></p><h4><a name='header-n247' class='md-header-anchor '></a>Additional Options</h4><p><code>--quality</code></p><p>Allows user to adjust the quality to compression ratio. Higher numbers result in higher quality but larger images. Default value is 95.</p><p>Example: <code>guetzli --quality 90 image.jpg compressed.jpg</code></p><p><code>--nomemlimit</code></p><p>Guetzli uses a great deal of memory, approximately 300mb per 1mb of your input image. If your image is too large, Guetzli will stop itself from running to prevent causing a system freeze. (NOTE: the limit seems to be statically set by Google and is not based on the amount of system RAM in your computer). You can attempt to override this behavior using the <code>--nomemlimit</code> flag, though users have reported this option only increases the memory limit.</p><p><code>--verbose</code></p><p>Provides more detailed information during encoding process.</p><h4><a name='header-n255' class='md-header-anchor '></a>Halting Progress(ive)</h4><p>In brief:</p><p>JPEG images can be encoded as either interlaced or progressive.</p><p>Progressive images are usually anywhere from 2% to 12% smaller. The trade off is they take twice as long to decode before reaching your display.</p><p>Most compression tools, such as jpeg-recompress, use the progressive format by default.</p><p>Guetzli breaks this trend and uses the interlaced format.</p><p>A Guetzli encoded image can actually be compressed further by throwing it into a lossless jpeg optimizer, such as jpegoptim (default settings), FileOptimizer, or ImageOptim.</p><h4><a name='header-n262' class='md-header-anchor '></a>Guetzli vs jpeg-recompress</h4><p><a href='https://davidwalsh.name/jpeg-compression-guetzli'>David Walsh</a> provides a detailed comparison between the utilities. I recommend checking it out if you&#39;re interested in a detailed analysis.</p><p>The short version:</p><blockquote><p>Guetzli beats out all of the other optimizers at the lowest allowable quality setting of 84, but it takes a brutal amount of time to do so. While most optimizers will get reasonably close, they can do so several orders of magnitude faster.</p></blockquote><p>David notes he ultimately prefers jpeg-recompressor due to it&#39;s speed and advanced options.</p><h4><a name='header-n268' class='md-header-anchor '></a>In Brief</h4><ul><li>Guetzli provides a better compression ratio but requires considerable encoding time</li><li>Guetzli has an adjustable <code>--quality</code> level, with a minimum setting of 84</li><li>Guetzli files are not progressive and additional savings can be achieved by running your JPEG files through lossless JPEG compression tools</li></ul><h2><a name='header-n276' class='md-header-anchor '></a>Creating Optimized Compressed Files from a PNG Source (and what to do when you can not use JPG)</h2><h3><a name='header-n277' class='md-header-anchor '></a>PNG to JPG</h3><p>There are an endless amount of GUI tools with this functionality built in. Be aware, however, that most of these tools are designed for speedy exports and won&#39;t provide a very optimized result.</p><p>Of the tools we&#39;ve covered, jpegoptim does not not support png to jpg conversion. Jpeg-recompress does, but only when using a related but external program, and even then using their own custom syntax- which I find to be more complex than it needs to be.</p><p>Guetzli not only supports a direct conversion, but when lossless sources are available, this is Google&#39;s recommended way to use the utility. Converting a PNG in Guetzli is as simple as:</p><p>&#39;guetzli image.png compressed.jpg&#39;</p><h3><a name='header-n282' class='md-header-anchor '></a>When You Can&#39;t Use JPEG: Compressing PNGs with Transparencies</h3><p>I mentioned earlier in this post a single use case scenario where you might create a lossy compressed image but would not use JPEG. The JPEG file format does not support transparency. In the event you don&#39;t know what transparency is or how it relates to images, I will provide a brief overview here.</p><h4><a name='header-n284' class='md-header-anchor '></a>What is Image Transparency?</h4><p>All raster images are rectangles. If an image has an irregular (i.e. non-rectangle) shape, what you&#39;re actually looking at is a rectangle with a transparent—a see through, invisible area—to create the illusion of that shape.</p><p>For example, here&#39;s an image of a shark.</p><p><img src='http://i.imgur.com/GXH3RUv.png' alt='Imgur' referrerPolicy='no-referrer' /></p><p>And here&#39;s what that image looks like in GIMP, an open source Photoshop alternative.</p><p><img src='http://i.imgur.com/wzcTiqB.jpg' alt='Imgur' referrerPolicy='no-referrer' /></p><p>GIMP, like most graphics programs, represents transparency with a checkerboard pattern. Notice how when you include the checkerboard area the image is a rectangle? As far as your browser is concerned, this is absolutely the case, but the transparent area is invisible to the user- creating the <em>illusion</em> of a shark shape.</p><p>When you convert a PNG image to a JPG, transparencies must be replaced by a color value. Many programs, such as GIMP&#39;s exporter, use white for this purpose. In the case of Guetzli, Google has opted for a black fill in.</p><p>Here&#39;s that same shark image converted to JPG using Guetzli.</p><p>What you need in this scenario is a lossy PNG compressor.</p><p><img src='https://nathanjplummer.github.io/blog/WordPress/Compression/no_transparency.jpg' alt='No Transparency' referrerPolicy='no-referrer' /></p><h3><a name='header-n295' class='md-header-anchor '></a>Using <a href='https://pngquant.org/'>PNGQuant</a> for JPEG Like Compression AND Transparency Support</h3><p><a href='https://pngquant.org/'>PNGQuant</a> is a <strong>lossy</strong> PNG compressor. From the PNGQuant website:</p><blockquote><p>The conversion reduces file sizes significantly (often as much as 70%) and preserves full alpha transparency. Generated images are compatible with all modern web browsers, and have better fallback in IE6 than 24-bit PNGs.</p></blockquote><h4><a name='header-n299' class='md-header-anchor '></a>Installation</h4><p>PNGQuant is included in the Ubuntu repository:</p><p><code>sudo apt-get install pngquant</code></p><p>OS X Users can install via homebrew:</p><p><code>brew install pngquant</code></p><p>A windows binary is available of <a href='https://pngquant.org/'>the front page</a>.</p><p>From the same page several GUIs are available for both Windows and OS X. Though most GUIs don&#39;t offer access to the more advanced options of the command line version, this is less of an issue with PNGQuant than it is with the JPEG tools.</p><h4><a name='header-n306' class='md-header-anchor '></a>Usage</h4><p>PNGQuant follows similar patterns to the JPEG tools.</p><p>By default:</p><p><code>pngquant image.png</code></p><p>PNGQuant respects the archival origins of PNG and will not overwrite your original file. The utility will create a new file in the same folder. The file name will be equal to the original with the exception of a <code>-fs8-</code> designation on the end.</p><p><code>image-fs8.png</code></p><h4><a name='header-n312' class='md-header-anchor '></a>Options</h4><p><code>--speed N</code></p><blockquote><p>Speed/quality trade-off from 1 (slowest, highest quality, smallest files) to 11 (fastest, less consistent quality, light comperssion). The default is 3. It&#39;s recommended to keep the default, unless you need to generate images in real time (e.g. map tiles). Higher speeds are fine with 256 colors, but don&#39;t handle lower number of colors well.</p></blockquote><p>This may come in handy if you are trying to shrink down a really large image. However, results are not as dramatic as changing similar quality settings in the JPEG utilities. Often, results are equal or near equal, regardless of setting.</p><p><code>-o</code></p><p>Allows user selectable output location instead of the default value:</p><p><code>pngquant --speed 1 image.png -o quantImage.png</code></p><p>A full list of options is available at this <a href='https://github.com/pornel/pngquant'>GitHub Repository</a></p><h2><a name='header-n321' class='md-header-anchor '></a>Compressing and Converting Your Videos for Maximum HTML5 Browser Compatibility</h2><p>Before HTML5, video on the web was dominated by external browser plugins- particularly Adobe Flash. Overtime, Flash developed a reputation for causing system crashes, slowing down web pages to a crawl, and most notably, being a security risk.</p><p>The advent of HTML5 provided additional tools for adding video to web pages, but browser vendors could not agree on any unified standards. Most disputes were over ideological differences or patents.</p><p>In fact, it was only as recent as January 12th, 2015- when Firefox added support for the mp4 container- that we had a video container all browser supported.</p><p>Even today, while Firefox technically supports the H.264 video codec and the AAC audio codec- the gold standards for the web- the browser relies on importing OS support for these formats and does not build the technologies directly into their browser.</p><p>It&#39;s because of this very lack of accepted options we will not spend time comparing video formats. Instead, this section will focus on simplicity and compatibility.</p><h3><a name='header-n327' class='md-header-anchor '></a>FFMPEG: A Free Tool to Create HTML5 Video</h3><p>An open source library and command line tool used to convert to and from many multimedia formats. <a href='https://ffmpeg.org/ffmpeg-filters.html'>Documentation is extensive and easily overwhelming to newcomers</a>.</p><p>If you clicked on that link on saw the novel-sized number of options, don&#39;t worry: we are going to cover only what you need to create videos for the web.</p><h3><a name='header-n330' class='md-header-anchor '></a>Installing FFMPEG</h3><p>In Ubuntu, FFMPEG is built into the repository:</p><p><code>sudo apt-get install FFMPEG</code></p><p>Install in OS X with homebrew</p><p><code>brew install ffmpeg</code></p><p>Installation in Windows is a bit complicated. The simplest method is to download the static build from <a href='http://ffmpeg.zeranoe.com/builds/'>this location</a>. From there you can simply put to the location of FFMPEG in Windows CMD during use.</p><p>Also, if you&#39;ve been following this guide, you already know you can simplify things by using the [Linux Subsystem for Windows](<a href='https://www.howtogeek.com/249966/how-to-install-and-use-the-linux-bash-shell-on-windows-10/'>Installing the Ubuntu Bash Shell in Windows</a>.</p><h3><a name='header-n337' class='md-header-anchor '></a>Create the Highest Compatible mp4 video (With Sound)</h3><p><code>ffmpeg -i yourvideo.mov -acodec aac -strict -2 -movflags faststart -pix_fmt yuv420p -vf &quot;scale=trunc(iw/2)<em>2:trunc(ih/2)</em>2&quot; video.mp4</code></p><p>The above command will give you the most compatible single video for the web.</p><ul><li><code>-i</code> stands for input. Substitute <code>yourvideo.mov</code> with your input video. (It does not have to be a mov file)</li><li>Substitute <code>video.mp4</code> with the desired name and location of your output video (in this case, however, DO use the mp4 file extension)</li><li>The <code>-acodec aac -strict -2</code> options convert your audio to AAC, the audio codec with the best browser support. <code>strict</code> disables some features that can cause issues in certain browsers, and <code>-2</code> makes sure your resulting audio is stereo.</li><li><code>-movflags faststart</code> optimizes your video for faster startup and streaming on the web</li><li><code>-pix_fmt yuv420p -vf &quot;scale=trunc(iw/2)*2:trunc(ih/2)*2</code> These last few options ensure compatibility with some of the pickier browsers, particularly on mobile.</li></ul><h3><a name='header-n351' class='md-header-anchor '></a>Create the Highest Compatible mp4 video (Without Sound)</h3><p><code>ffmpeg -i yourvideo.mov -an faststart -pix_fmt yuv420p -vf &quot;scale=trunc(iw/2)<em>2:trunc(ih/2)</em>2&quot; video.mp4</code></p><p>This sequence, which removes the aac bits and instead uses the <code>-an</code> no audio flag, is useful if you want to strip sound from your video. It&#39;s even more useful if your input video does not have sound.</p><p>Why?</p><p>Every once in a while I receive a &quot;video only&quot; file that in reality contains a silent or near silent audio track. Not only does this take up unnecessary file space, but it can occasionally cause high pitched audio artifacts during conversion.</p><p>The <code>-an</code> flag is extra insurance to avoid any of the above issues.</p><h3><a name='header-n357' class='md-header-anchor '></a>Convert an Animated GIF to an MP4 For Extreme File Size Savings</h3><p><code>ffmpeg -i animated.gif -an faststart -pix_fmt yuv420p -vf &quot;scale=trunc(iw/2)<em>2:trunc(ih/2)</em>2&quot; video.mp4</code></p><p>&quot;Wait a minute, this is the same command!&quot;</p><p>Indeed, other than changing the input file name, this is the exact same sequence of commands as the above example.</p><p>However, I did want to demonstrate that if you have any animated GIFs you wish to use, it&#39;s worth converting them to mp4 instead.</p><p>It&#39;s not unheard of for the resulting mp4 to be a mere 5% of the GIF size, with nearly no quality loss!</p><p>If you want your code to loop endlessly (like most animated GIFs), you can use the following html:</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;video autoplay="autoplay" loop="loop" width="720" height="480"&gt;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;source src="giffy.mp4" type="video/mp4" /&gt;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;img src="giffy.gif" width="720" height="480" /&gt;&lt;/video&gt;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>Note the last line provides the GIF as a fall back in the event the browser can not load the mp4 file. (Also, don&#39;t forget to adjust the <code>width</code> and <code>height</code> when using your own file).</p><h2><a name='header-n366' class='md-header-anchor '></a>A few small notes:</h2><p>A few miscellaneous considerations to wrap things up with:</p><h3><a name='header-n368' class='md-header-anchor '></a>But wait, you forgot...</h3><p>Lots. This topic is so comprehensive a full book could be written on the subject, and <em>still</em> not cover nearly everything.</p><h3><a name='header-n370' class='md-header-anchor '></a>This was so long...</h3><p>Indeed. I wrote this guide because, quite frankly, I could not find anything like it when I started researching compression methods.</p><p>Most of the techniques listed here are pretty easy for anyone with even the most basic command-line experience. With a proper guide, I could have easily mastered these beginner to intermediate techniques in under a week!</p><p>Instead I found a lot of wonderful tutorials that only covered a single tool, or covered a single <em>feature</em> of a tool. The barrier to education was not a lack of information, but rather the lack of <em>organized</em> information.</p><p>With the techniques listed here I believe you&#39;ll be optimizing your assets in no time!</p><p>&nbsp;</p><p>&nbsp;</p><p><strong>References</strong></p><p><a href='https://help.netflix.com/en/node/87'>Netflix Video Size</a></p><p><a href='https://www.theverge.com/2015/1/29/7932653/fcc-changed-definition-broadband-25mbps'>The FCC Defines Broadband</a></p><p><a href='https://www.fcc.gov/reports-research/reports/broadband-progress-reports/2016-broadband-progress-report'>FCC 2016 Broadband Access Report</a></p><p><a href='http://www.speedtest.net/global-index'>SpeedTest Global Index</a></p><p><a href='https://hbfs.wordpress.com/2012/02/07/looking-at-flac-compression-ratios/'>Looking at FLAC Compression Ratios</a></p><p><a href='http://nikkhokkho.sourceforge.net/static.php?page=FileOptimizer'>File Optimizer</a></p><p><a href='https://imageoptim.com/mac'>ImageOptim</a></p><p><a href='https://www.winehq.org/'>WINE</a></p><p><a href='https://github.com/Kilian/Trimage'>Trimage</a></p><p><a href='https://github.com/tjko/jpegoptim'>jpegoptim</a></p><p><a href='https://github.com/danielgtaylor/jpeg-archive'>jpeg-archive</a></p><p><a href='https://github.com/google/guetzli'>Guetzli</a></p><p><a href='https://brew.sh/'>Homebrew- the Missing Package Manager for OS X</a></p><p><a href='https://www.gimp.org/'>GIMP</a></p><p><a href='https://www.ffmpeg.org/'>FFMPEG</a></p><p><a href='https://caniuse.com/#feat=mpeg4'>Can I Use MP4</a></p><p><a href='https://caniuse.com/#search=h264'>Can I Use h.264</a></p><p><a href='https://caniuse.com/#search=AAC'>Can I Use AAC</a></p><p>&nbsp;</p><p><strong>AUTHOR: Nathan J Plummer</strong></p><p><img src='https://avatars0.githubusercontent.com/u/16419908?s=460&amp;v=4' alt='' referrerPolicy='no-referrer' /></p></div>
</body>
</html>