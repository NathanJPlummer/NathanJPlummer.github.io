<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Eager-Toad Hackaton Practice</title>
    <link rel="stylesheet" type="text/css" href="normalize.css">
    <link rel="stylesheet" href="ranger.css" media="screen">
    <link rel="stylesheet" href="zord.css" media="screen">
    <link rel="stylesheet" type="text/css" href="fonts/stylesheet.css">

</head>

<body>

    <div class="header">
        <h1>The Command Center Ranger Initiation</h1>
        <span><img src="img/cZordon.png" alt="Zordon"></span>
    </div>

        <div class="show-error hid">
          <img src="img/Invalid.png" alt="Invalid input" class="error-img">
        </div>
        <!-- capsule is a mini container for each of the questions (label and input) -->
        <div class="capsule q1">
            <label for="ranger-civil">What's your ranger civilian name?</label>

            <input placeholder="Enter Name" type="text" class="inp">
            <input type="image"  class="next-question" src="img/NextButton.png" alt="Submit Form" />

        </div>

        <div class="capsule q2">
            <label for="ranger-active">What year was your ranger active?</label>

            <input placeholder="Enter Year" type="number" name="birth" class="inp">
            <input type="image"  class="next-question" src="img/NextButton.png" alt="Submit Form" />

        </div>

        <div class="capsule q3">
            <label for="ranger-coin">Pick a power coin</label>
            <br>

                <img src="img/Raptor.png"/>
                <input type="radio" name="coin" value="raptor" class="inp">
                <img src="img/Dire_Wolf.png"/>
                <input type="radio" name="coin" value="wolf" class="inp">
                <img src="img/Megalodon.png"/>
                <input type="radio" name="coin" value="shark" class="inp">
                <input type="image"  class="next-question" src="img/NextButton.png" alt="Submit Form" />
        </div>

        <div class="capsule q4">
            <label for="ranger-color">Choose your ranger color:</label>
            <input type="color" name="color" class="inp">
            <img src="img/CreateRangerV2.png"/>
            <input type="image"  class="next-question" src="img/NextButton.png" alt="Submit Form" />
        </div>

        <div class="capsule q5">
            <label for="ranger-origin">Describe your ranger's origin</label>

            <textarea name="origin" id="ranger-origin" cols="30" rows="10" class="inp"></textarea>
            <input type="image"  class="next-question" src="img/NextButton.png" alt="Submit Form" />

        </div>

        <div class="capsule q6">
            <label for="zord-name">Name your zord</label>

            <input type="text" placeholder="Enter Zord Name" name="zord" class="inp">
            <input type="image"  class="next-question" src="img/NextButton.png" alt="Submit Form" />

        </div>


    <script>
        var questions = 1;
        var error = document.querySelector('.show-error');

        var inps = document.querySelectorAll('.inp');
        var txt = document.querySelector('textarea');
        var next_btns = document.querySelectorAll('.next-question');

        txt.addEventListener("focusin", function(e){
          error.className = "show-error hid";
        });

        for (var i = 0; i < next_btns.length; i++) {
            inps[i].addEventListener("focusin", function(e){
              error.className = "show-error hid";
            });

            next_btns[i].addEventListener("click", function(e) {
                processQuestion(this.parentNode);
            });
        }

        // Getting the capsule question...
        function processQuestion(qst){

          if(questions == 5){
            var ans = qst.querySelector("textarea").value;
          }else{
            var ans = qst.querySelector("input").value;
          }

          if( isEmpty(ans) ){
            error.className = "show-error shw";
            //alert("This is where the image goes");
          }else{
            questions++;

            var cls = qst.classList;

            nextQuestion(cls);
          }

        }

        function nextQuestion(q){
          error.className = "show-error hid";
          var old_q = parseInt(q[1][1]);
          var q_old = document.querySelector("."+q[1]);
          var new_q = old_q+1;

          if( new_q <= 6){
            q_old.className+=" hide";
            var q_new = document.querySelector(".q"+new_q);
            q_new.className+=" visible";
          }else{
            alert("End of the questions");
          }

        }

        function getAncestor(el, ancestor) {

            while ((el = el.parentElement) && !el.classList.contains(ancestor));

            return el;
        }

        function isEmpty(input) {
            if (input == "") {
                return true;
            } else {
                var nothing;
                nothing = input.split(" ").join("");

                return nothing.length == 0;
            }
        }

    </script>


</body>

</html>
